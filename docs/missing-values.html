<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Missing values | EDAV Group3 Final Project</title>
  <meta name="description" content="Chapter 4 Missing values | EDAV Group3 Final Project" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Missing values | EDAV Group3 Final Project" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Missing values | EDAV Group3 Final Project" />
  
  
  

<meta name="author" content="Xinwen Miao, Yilan Jiang, Huiqian Yu, Diyue Gu" />


<meta name="date" content="2020-12-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-cleaning.html"/>
<link rel="next" href="results.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">edavgroup3finalproj</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a><ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#describe-the-data-sources"><i class="fa fa-check"></i><b>2.1</b> Describe the data sources:</a></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#basic-information-about-the-air-pollution-dataset"><i class="fa fa-check"></i><b>2.2</b> Basic information about the air pollution dataset:</a></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#basic-information-about-the-cancer-dataset"><i class="fa fa-check"></i><b>2.3</b> Basic information about the cancer dataset:</a></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#describe-any-issues-with-the-air-pollution-data"><i class="fa fa-check"></i><b>2.4</b> Describe any issues with the air pollution data:</a></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#describe-any-issues-with-the-cancer-data"><i class="fa fa-check"></i><b>2.5</b> Describe any issues with the cancer data:</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-cleaning.html"><a href="data-cleaning.html"><i class="fa fa-check"></i><b>3</b> Data Cleaning</a><ul>
<li class="chapter" data-level="3.1" data-path="data-cleaning.html"><a href="data-cleaning.html#data-source-1"><i class="fa fa-check"></i><b>3.1</b> Data Source 1</a></li>
<li class="chapter" data-level="3.2" data-path="data-cleaning.html"><a href="data-cleaning.html#data-source-2"><i class="fa fa-check"></i><b>3.2</b> Data Source 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a><ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#data-source-1-1"><i class="fa fa-check"></i><b>4.1</b> Data Source 1</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#data-source-2-1"><i class="fa fa-check"></i><b>4.2</b> Data Source 2</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a><ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#packages"><i class="fa fa-check"></i><b>5.1</b> Packages</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#data-1"><i class="fa fa-check"></i><b>5.2</b> Data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#data-distribution"><i class="fa fa-check"></i><b>5.2.1</b> Data Distribution</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#how-does-air-pollution-spread-over-the-past-ten-years"><i class="fa fa-check"></i><b>5.3</b> How does air pollution spread over the past ten years?</a><ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#time-series-of-so2-and-no3-across-the-nation"><i class="fa fa-check"></i><b>5.3.1</b> Time Series of SO2 and NO3 Across the Nation</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#monthly-time-series"><i class="fa fa-check"></i><b>5.3.2</b> Monthly Time Series</a></li>
<li class="chapter" data-level="5.3.3" data-path="results.html"><a href="results.html#did-covid-19-lockdown-significantly-reduce-air-pollution-in-new-york-state"><i class="fa fa-check"></i><b>5.3.3</b> Did Covid-19 lockdown significantly reduce air pollution in New York State?</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#how-does-air-pollution-spread-across-states"><i class="fa fa-check"></i><b>5.4</b> How does air pollution spread across states?</a><ul>
<li class="chapter" data-level="5.4.1" data-path="results.html"><a href="results.html#spatial-distribution-of-so2-and-no3-over-states"><i class="fa fa-check"></i><b>5.4.1</b> Spatial distribution of SO2 and NO3 over states</a></li>
<li class="chapter" data-level="5.4.2" data-path="results.html"><a href="results.html#spatial-distribution-of-no3"><i class="fa fa-check"></i><b>5.4.2</b> Spatial distribution of NO3</a></li>
<li class="chapter" data-level="5.4.3" data-path="results.html"><a href="results.html#pollutant-distribution-over-states"><i class="fa fa-check"></i><b>5.4.3</b> Pollutant distribution over states</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a><ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#lung-and-bronchus-cancer-rate-and-pollutants-poncentrations"><i class="fa fa-check"></i><b>7.1</b> Lung and Bronchus Cancer Rate and Pollutants’ Poncentrations</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EDAV Group3 Final Project</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="missing-values" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Missing values</h1>
<div id="data-source-1-1" class="section level2">
<h2><span class="header-section-number">4.1</span> Data Source 1</h2>
<p>After data cleaning in the last section, we ends up with 1337 rows with at least one missing values, 16596 total missing values, and the percentage of missing values over the entire dataset is around 1.78 percent.</p>
<p>After that, we would like to know if all variables have the same percentage of missing values. Therefore, we sum up missing values by column as shown below.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="missing-values.html#cb1-1"></a>data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file=</span><span class="st">&#39;./data/ProcessedData.csv&#39;</span>)</span>
<span id="cb1-2"><a href="missing-values.html#cb1-2"></a>data &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">rename</span>(<span class="dt">SO2 =</span> TOTAL_SO2, <span class="dt">NO3=</span>TOTAL_NO3)</span>
<span id="cb1-3"><a href="missing-values.html#cb1-3"></a><span class="kw">kable</span>(<span class="kw">colSums</span>(<span class="kw">is.na</span>(data)))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">X</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">SITE_ID</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">STATE</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">COUNTY</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">LATITUDE</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">LONGITUDE</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">ELEVATION</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">TYPE</td>
<td align="right">53</td>
</tr>
<tr class="odd">
<td align="left">TSO4</td>
<td align="right">1273</td>
</tr>
<tr class="even">
<td align="left">TNO3</td>
<td align="right">1273</td>
</tr>
<tr class="odd">
<td align="left">TNH4</td>
<td align="right">1273</td>
</tr>
<tr class="even">
<td align="left">CA</td>
<td align="right">1278</td>
</tr>
<tr class="odd">
<td align="left">MG</td>
<td align="right">1276</td>
</tr>
<tr class="even">
<td align="left">NA.</td>
<td align="right">1278</td>
</tr>
<tr class="odd">
<td align="left">K</td>
<td align="right">1351</td>
</tr>
<tr class="even">
<td align="left">CL</td>
<td align="right">1283</td>
</tr>
<tr class="odd">
<td align="left">NSO4</td>
<td align="right">1275</td>
</tr>
<tr class="even">
<td align="left">NHNO3</td>
<td align="right">1275</td>
</tr>
<tr class="odd">
<td align="left">WSO2</td>
<td align="right">1299</td>
</tr>
<tr class="even">
<td align="left">SO2</td>
<td align="right">1287</td>
</tr>
<tr class="odd">
<td align="left">NO3</td>
<td align="right">1265</td>
</tr>
<tr class="even">
<td align="left">FLOW_VOLUME</td>
<td align="right">955</td>
</tr>
<tr class="odd">
<td align="left">VALID_HOURS</td>
<td align="right">945</td>
</tr>
<tr class="even">
<td align="left">STD2LOCAL_CF</td>
<td align="right">70</td>
</tr>
<tr class="odd">
<td align="left">TEMP_SOURCE</td>
<td align="right">53</td>
</tr>
<tr class="even">
<td align="left">date_off</td>
<td align="right">53</td>
</tr>
<tr class="odd">
<td align="left">update_date</td>
<td align="right">53</td>
</tr>
<tr class="even">
<td align="left">REGION</td>
<td align="right">553</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="missing-values.html#cb2-1"></a>df &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(REGION, SO2, NO3, CA, MG, K, CL)</span>
<span id="cb2-2"><a href="missing-values.html#cb2-2"></a>df_na &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">percent=</span><span class="kw">round</span>(<span class="kw">colSums</span>(<span class="kw">is.na</span>(df))<span class="op">/</span><span class="kw">nrow</span>(df)<span class="op">*</span><span class="dv">100</span>))</span>
<span id="cb2-3"><a href="missing-values.html#cb2-3"></a>df_na<span class="op">$</span>keyFeatures &lt;-<span class="st"> </span><span class="kw">rownames</span>(df_na)</span>
<span id="cb2-4"><a href="missing-values.html#cb2-4"></a><span class="kw">ggplot</span>(df_na, <span class="kw">aes</span>(keyFeatures, percent, <span class="dt">fill=</span>percent)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb2-5"><a href="missing-values.html#cb2-5"></a><span class="st">  </span><span class="kw">geom_col</span>()<span class="op">+</span></span>
<span id="cb2-6"><a href="missing-values.html#cb2-6"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Features&quot;</span>)<span class="op">+</span></span>
<span id="cb2-7"><a href="missing-values.html#cb2-7"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Percentage&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb2-8"><a href="missing-values.html#cb2-8"></a><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Percentage of NAs of Main Features&quot;</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Notice that each pollutant concentration variables contain almost the same percentage of missing values, about 3 percents.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="missing-values.html#cb3-1"></a><span class="kw">gg_miss_upset</span>(df)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>The two plots above are consistent to what we suspected, all pollutant concentrations have almost the same missing value pattern. There are 1259 rows missing all five major pollutants and 16 rows missing four major pollutants.</p>
</div>
<div id="data-source-2-1" class="section level2">
<h2><span class="header-section-number">4.2</span> Data Source 2</h2>
<p>Let us then look at a cancer dataset we used to study the relationship between air polluants and lung cancer.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="missing-values.html#cb4-1"></a><span class="kw">load</span>(<span class="st">&quot;./data/DiseaseProcessedData.RData&quot;</span>)</span>
<span id="cb4-2"><a href="missing-values.html#cb4-2"></a>data &lt;-<span class="st"> </span>temp</span>
<span id="cb4-3"><a href="missing-values.html#cb4-3"></a>data[data<span class="op">==</span><span class="st">&quot;~&quot;</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb4-4"><a href="missing-values.html#cb4-4"></a><span class="kw">kable</span>(<span class="kw">colSums</span>(<span class="kw">is.na</span>(data)))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">STATE</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">AREA</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">AGE_ADJUSTED_RATE</td>
<td align="right">3077</td>
</tr>
<tr class="even">
<td align="left">COUNT</td>
<td align="right">3077</td>
</tr>
<tr class="odd">
<td align="left">EVENT_TYPE</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">POPULATION</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">RACE</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">SEX</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">SITE</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">YEAR</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">CRUDE_RATE</td>
<td align="right">3077</td>
</tr>
</tbody>
</table>
<p>There are 3077 missing values for three features of the dataset. The following plot provide information on the overall percentage of missing values in each feature. Notice that missing values patterns are uniform across all the entire dataset.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="missing-values.html#cb5-1"></a><span class="kw">vis_miss</span>(data)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" />
If we break the missing values down by a categorical variable called EVENT_TYPE, then we can see that there are are more missing values when the EVENT_TYPE is “Mortality” compared to “Incidence”.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="missing-values.html#cb6-1"></a><span class="kw">gg_miss_fct</span>(<span class="dt">x=</span>data, <span class="dt">fct=</span>EVENT_TYPE)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-cleaning.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/edavGroup3/usairpollution/edit/main/04-missing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/edavGroup3/usairpollution/blob/main/04-missing.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
