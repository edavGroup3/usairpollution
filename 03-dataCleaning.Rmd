# Data Cleaning
```{r setup, include=FALSE}
 # keep this chunk in your .Rmd file
 knitr::opts_chunk$set(warning = FALSE, message = FALSE)
```


```{r}
library(tidyr)
library(dplyr)
```

In data cleaning stage, we deleted unrelated columns from the original data set.For pollution data, we merged two data sets by their SITE_ID to add location information into the air pollution info. Also, we changed the date time format into desired date type. 

```{r}
site<-read.csv("./data/site.csv")
raw<-read.csv("./data/Filter Pack Concentrations - Weekly.csv")
site1<- site %>% select(SITE_ID,STATE,COUNTY,LATITUDE,LONGITUDE,ELEVATION)
data <- full_join(site1,raw,by='SITE_ID') %>%
  select(-WNO3,-QA_CODE,-DATEON,-COMMENT_CODES,-TOTAL_NO3) 
data$date_off <- as.Date(data$DATEOFF, "%m/%d/%Y")
data$update_date <- as.Date(data$UPDATE_DATE, "%m/%d/%Y")
data <- data %>%
  select(-UPDATE_DATE,-DATEOFF) 
head(data)
write.csv(data, file="./data/processedData.csv")
```
###NOTE from data source website: 
The following suppression rules are implemented in the ASCII files. 

--Rates and Counts are suppressed if fewer than 16 cases were reported in a specific category ('~' assigned to count, rate, LCI, and UCI); 

--Rate and Counts are suppressed if state requested suppressions for race and ethnicity ('-' assigned to count, rate, LCI, and UCI);

--Within each Race, CancerSite, Area, RateType and DataType, "Male" or "Female" counts are suppressed (supplementarily) if the counterpart sex ("Female" or "Male") is suppressed. Leave "Male and Female" count unchanged ('+' assigned to count due to supplementary suppression). 

```{r}
load("./data/RawCancerData.RData")
head(data)
temp <- data %>%
  select(-AGE_ADJUSTED_CI_LOWER, -AGE_ADJUSTED_CI_UPPER, -CRUDE_CI_LOWER, -CRUDE_CI_UPPER, -AREA)
head(temp)
save(temp, file="./data/DiseaseProcessedData.RData")
```



